<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD</title>
</head>
<script src="/urlDemo/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $("#btn1").click(function () {
            let user = {
                name: 'ChatGPT',
                data: 'testxxxxxxxxYY'
            }
            createUser(user);
        });
        $("#btn2").click(function () {
            let user = {
                name: 'ChatGPT'
            }
            queryUser(user);
        });
        $("#btn3").click(function () {
            let user = {
                name: 'ChatGPT'
            }
            deleteUser(user);
        });
    });

    function createUser(user) {
        $.ajax({
            url: 'http://localhost:8080/api/createUser',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(user),
            dataType: 'json',
            success: handleSuccess,
            error: handleError,
            complete: handleComplete
        });
    }

    function queryUser(user) {
        $.ajax({
            url: 'http://localhost:8080/api/queryUser',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(user),
            dataType: 'json',
            success: handleSuccess,
            error: handleError,
            complete: handleComplete
        });
    }

    function deleteUser(user) {
        $.ajax({
            url: 'http://localhost:8080/api/deleteUser',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(user),
            dataType: 'json',
            success: handleSuccess,
            error: handleError,
            complete: handleComplete
        });
    }

    // 成功回應
    function handleSuccess(response) {
        $("#test1").html("回應成功: " + JSON.stringify(response));
    }

    // 錯誤回應
    function handleError(xhr, status, error) {
        $("#test2").html("AJAX 錯誤: " + error);
    }

    // 請求完成
    function handleComplete() {
        $("#test3").html('請求完成');
    }


</script>

<body>
    <button id="btn1">新增</button>
    <button id="btn2">查詢</button>
    <button id="btn3">刪除</button>
    <p id="test1"></p>
    <p id="test2"></p>
    <p id="test3"></p>
</body>

</html>