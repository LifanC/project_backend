<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD</title>
</head>
<script src="/jquery.min.js"></script>
<script>
    var http = "http://localhost:8080/api/";
    $(document).ready(function () {
        $("#btn1").click(function () {
            let user = {
                name: $("#inp1").val(),
                data: $("#inp2").val()
            }

            $.ajax({
                url: http + 'createUser',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(user),
                dataType: 'json',
                success: handleSuccess,
                error: handleError,
                complete: handleComplete
            });
        });
        $("#btn2").click(function () {
            let user = {
                name: $("#inp1").val()
            }

            $.ajax({
                url: http + 'queryUser',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(user),
                dataType: 'json',
                success: handleSuccess,
                error: handleError,
                complete: handleComplete
            });
        });
        $("#btn3").click(function () {
            let user = {
                name: $("#inp1").val()
            }

            $.ajax({
                url: http + 'deleteUser',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(user),
                dataType: 'json',
                success: handleSuccess,
                error: handleError,
                complete: handleComplete
            });
        });
    });

    // 成功回應
    function handleSuccess(response) {
        $("#test1").html("回應成功: " + JSON.stringify(response));
    }

    // 錯誤回應
    function handleError(xhr, status, error) {
        $("#test2").html("AJAX 錯誤: " + error);
    }

    // 請求完成
    function handleComplete() {
        $("#test3").html('請求完成');
    }


</script>

<body>
    <div>
        <input id="inp1" value="ChatGPT" />Name
        <br>
        <input id="inp2" value="test" />Data
    </div>
    <button id="btn1">新增</button>
    <button id="btn2">查詢</button>
    <button id="btn3">刪除</button>
    <p id="test1"></p>
    <p id="test2"></p>
    <p id="test3"></p>
</body>

</html>